<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Entre P√°ginas y Sabores</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" th:href="@{/css/stylebiblio.css}" />
  </head>
  <body>
    <div id="modalBiblioteca" class="modal">
      <div class="modal-content">
        <span class="close" onclick="cerrarModalBiblioteca()">&times;</span>
        <h2>Nueva llegada</h2>
        <p>
          Ya est√° disponible el nuevo libro de Isabel Allende en nuestra
          biblioteca.
        </p>
      </div>
    </div>

    <header>
      <div class="container">
        <div class="logo">
          <h1><i class="fas fa-book-open"></i> Entre P√°ginas y Sabores</h1>
        </div>
        <div class="search-bar">
          <input
            type="text"
            id="search-input"
            placeholder="Buscar libros o pr√©stamos..."
          />
          <button id="search-btn"><i class="fas fa-search"></i></button>
        </div>
        <button class="hamburger" id="hamburger-btn">
          <i class="fas fa-bars"></i>
        </button>
        <nav class="nav-links">
          <ul class="flex flex-col md:flex-row md:gap-6 text-white">
            <li><a href="#inicio">Inicio</a></li>
            <li><a href="#catalogo">Cat√°logo</a></li>
            <li><a href="#prestamos">Pr√©stamos</a></li>
            <li><a href="#maraton">Marat√≥n</a></li>
            <li><a href="#eventos">Eventos</a></li>
            <li><a href="#write">Escribe</a></li>
            <li><a href="#contacto">Contacto</a></li>
            <li><a id="register-link">Registro</a></li>
            <li><a th:href="@{/login}">Iniciar Sesi√≥n</a></li>
            <div class="login-buttons">
              <label class="switch">
                <input id="theme-toggle-input" type="checkbox" />
                <span class="slider round">
                  <i class="fas fa-sun sun-icon"></i>
                  <i class="fas fa-moon moon-icon"></i>
                </span>
              </label>
            </div>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      <section id="carousel-section" class="carousel">
        <h2>Libros Destacados</h2>
        <div class="carousel-container">
          <button class="carousel-prev" id="carousel-prev-btn">
            <i class="fas fa-chevron-left"></i>
          </button>
          <div class="carousel-slides">
            <div class="carousel-slide active">
              <img
                src="https://statics.uniradioinforma.com/2023/07/crop/64a330d58847f__940x940.webp"
                alt="Romper el C√≠rculo"
              />
              <h3>Romper el C√≠rculo</h3>
              <p>Colleen Hoover</p>
              <button
                class="tts-btn"
                data-text="Lily no siempre lo ha tenido f√°cil, pero eso nunca le ha impedido luchar por la vida que quiere."
              >
                <i class="fas fa-volume-up"></i> Escuchar
              </button>
            </div>
            <div class="carousel-slide">
              <img
                src="https://m.media-amazon.com/images/I/91CcrfPNjSL._SL1500_.jpg"
                alt="Culpa M√≠a"
              />
              <h3>Culpa M√≠a</h3>
              <p>Mercedes Ron</p>
              <button
                class="tts-btn"
                data-text="Una historia de amor prohibido entre hermanastros en el glamuroso mundo de Hollywood."
              >
                <i class="fas fa-volume-up"></i> Escuchar
              </button>
            </div>
            <div class="carousel-slide">
              <img
                src="https://www.libreriaespanola.com/wp-content/uploads/2022/05/05057347.jpg"
                alt="A trav√©s de mi ventana"
              />
              <h3>A Trav√©s de Mi Ventana</h3>
              <p>Ariana Godoy</p>
              <button
                class="tts-btn"
                data-text="Una trilog√≠a de amor y misterio sobre Raquel y Ares, dos vecinos que se enamoran sin conocerse."
              >
                <i class="fas fa-volume-up"></i> Escuchar
              </button>
            </div>
          </div>
          <button class="carousel-next" id="carousel-next-btn">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </section>

      <section id="catalogo" class="py-16 px-4 max-w-6xl mx-auto">
        <h2 class="text-4xl font-bold text-center mb-8">Cat√°logo de Libros</h2>
        <div class="category-filter">
          <select id="category-select">
            <option value="">Todas las categor√≠as</option>
            <option value="Drama">Drama</option>
            <option value="Novela">Novela</option>
            <option value="Poes√≠a">Poes√≠a</option>
            <option value="Fantas√≠a">Fantas√≠a</option>
            <option value="Cl√°sico">Cl√°sico</option>
            <option value="Rom√°ntica">Rom√°ntica</option>
            <option value="Distop√≠a">Distop√≠a</option>
            <option value="Infantil">Infantil</option>
            <option value="Aventura">Aventura</option>
            <option value="Terror">Terror</option>
            <option value="Misterio">Misterio</option>
            <option value="No ficci√≥n">No ficci√≥n</option>
            <option value="Ciencia">Ciencia</option>
          </select>
        </div>
        <div id="book-grid" class="book-grid">
          <p class="text-center">Cargando libros...</p>
        </div>
        <div class="pagination">
          <button class="pagination-prev">
            <i class="fas fa-chevron-left"></i>
          </button>
          <div id="pagination-numbers" class="pagination-numbers"></div>
          <button class="pagination-next">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </section>

      <section id="maraton" class="maraton">
        <h2>Marat√≥n de Libros 2025</h2>
        <p>
          ¬°√önete a nuestro desaf√≠o de lectura! Lee 5 libros en un mes y comparte
          tus rese√±as.
        </p>
        <ul>
          <li><strong>Fecha:</strong> 1-31 de Octubre, 2025</li>
          <li><strong>Tema:</strong> Aventuras y Fantas√≠a</li>
          <li><strong>Premio:</strong> Membres√≠a gratuita por un a√±o</li>
        </ul>
      </section>

      <section id="eventos">
        <h2>Eventos de la Biblioteca</h2>
        <div class="eventos-grid">
          <div class="evento">
            <h3>Lectura de Poes√≠a</h3>
            <p><i class="fas fa-calendar-alt"></i> 25 de Mayo, 2025</p>
            <p>√önete a nuestra noche de poes√≠a con autores locales.</p>
          </div>
          <div class="evento">
            <h3>Taller de Escritura</h3>
            <p><i class="fas fa-calendar-alt"></i> 30 de Mayo, 2025</p>
            <p>Aprende t√©cnicas de escritura creativa con expertos.</p>
          </div>
          <div class="evento">
            <h3>Club de Lectura</h3>
            <p><i class="fas fa-calendar-alt"></i> 5 de Junio, 2025</p>
            <p>Discutimos "El Principito" en un ambiente acogedor.</p>
          </div>
        </div>
      </section>


    <div id="register-modal" class="modal">
      <div class="register-container">
        <button class="close-modal">√ó</button>
        <h2 class="text-2xl font-bold text-center mb-4">Registro de Usuario</h2>
        <div id="register-notification" class="register-notification"></div>
        <form id="registroForm">
          <label for="nombre">Nombre:</label>
          <input
            type="text"
            id="nombre"
            name="nombre"
            required
            placeholder="Ingresa tu nombre"
          />
          <label for="email">Correo:</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            placeholder="Ingresa tu correo"
          />
          <label for="password">Contrase√±a:</label>
          <input
            type="password"
            id="password"
            name="password"
            required
            placeholder="Ingresa tu contrase√±a"

          />
          <label>Rol:</label>
          <select id="rol" name="rol">
            <option value="ADMIN">Administrador</option>
            <option value="BIBLIOTECARIO">Bibliotecario</option>
            <option value="USER">Usuario</option>
            <option value="LECTOR">Lector</option>
          </select>

          <button type="submit">Registrarse</button>
        </form>
        <p>¬øYa tienes cuenta? <a href="login">Inicia sesi√≥n aqu√≠</a></p>
      </div>
    </div>
    <section id="poemas" class="py-12 px-4 max-w-4xl mx-auto text-center">
    <h2 class="text-3xl font-bold mb-6 text-gray-800 dark:text-gray-200">
        <i class="fas fa-feather-alt"></i> Poemas de la Semana
    </h2>
    <div class="poema-container bg-white dark:bg-gray-700 p-8 rounded-lg shadow-xl transition-colors duration-300">
        <h3 id="poema-titulo" class="text-2xl font-semibold mb-3 text-red-600 dark:text-red-400">
            Cargando t√≠tulo...
        </h3>
        <p id="poema-texto" class="text-lg italic mb-4 whitespace-pre-line text-gray-700 dark:text-gray-300">
            Cargando el verso...
        </p>
        <p id="poema-autor" class="text-right font-medium text-gray-500 dark:text-gray-400">
            - Autor
        </p>
    </div>
    <button 
        id="tts-poema-btn" 
        class="mt-4 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition-colors duration-300"
        onclick="speak(document.getElementById('poema-texto').innerText, this)"
    >
        <i class="fas fa-volume-up"></i> Escuchar Poema
    </button>
</section>

    <footer id="contacto">
      <p>üìç Av. San Mart√≠n 234 - Chiclayo, Per√∫ | ‚òéÔ∏è (084) 123-456</p>
      <p>
        ¬© 2025 Entre P√°ginas | Contacto:
        <a href="mailto:info@entrepaginas.org" class="underline"
          >info@entrepaginas.org</a
        >
        |
        <a
          href="https://wa.me/51999999999?text=¬°Hola! Quiero saber m√°s sobre Entre P√°ginas üìö"
          class="underline bg-green-500 px-2 py-1 rounded"
          >WhatsApp</a
        >
      </p>
    </footer>

    <div class="notification" id="loan-notification">
      <span id="notification-text"></span>
    </div>

    <!-- Script original de biblioteca.js -->
    <script th:src="@{/js/biblioteca.js}"></script>
    
    <!-- Nuevo script para cargar libros desde BD -->
    <script th:src="@{/js/carga-biblioteca.js}"></script>
  </body>
</html>